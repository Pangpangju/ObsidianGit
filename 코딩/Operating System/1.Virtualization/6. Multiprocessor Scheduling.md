> [!note] 멀티프로세서란?
여러개의 CPU가 하나의 칩에 설치된 <font color="#c0504d">멀티코어</font> 기술이 대중화하면서 사용하게 된 방법 중 하나.

고전적인 프로그램은 하나의 CPU만 사용하게끔 설계되어 있어 CPU를 추가한다고 더 속도가 빨라지거나 하지는 않는다.

그러기에 프로그램을 ==병렬(parallel)==로 실행되도록 설계해야 한다.
이 때 이용하는 것이 바로 [[쓰레드(thread)]]이다.

쓰레드는 그렇다 치고, 어떻게 우리가 지금까지 배워왔던 스케줄링을 새로운 환경인 멀티코어에서 활용할 것인가?

### 기본 개념

단일 CPU 시스템에는 [[하드웨어 캐시(Cache)]] 계층이 존재한다.

보통 멀티 프로세서 환경에서 캐시를 사용하다 보면
[[캐시 일관성 문제(Cache Coherence)]]가 발생하는데 해결책은 하드웨어에 의해 제공한다.

메모리 주소를 계속 감시하고 제대로된 상황만 발생하도록 시스템을 관리한다.

위에 살펴본 바와 같이 문제는 항상 '공유데이터' 사이에서 일어난다. 
이를 해결하기 위해 락-프리(lock-free) 데이터 구조를 사용한다(성능 저하 일으키기도 함).

또 하나의 문제점은 [[캐시 친화성(Cache affinity)]]이다.

### 단일 큐 스케줄링(SQMS)

이 방식은 단순하다. CPU가 2개라면 2개의 작업을 실행한다.

하지만 단순한 만큼 문제점이 있는데 첫번째 문제는...

##### 확장성 결여
- 다수의 CPU에서 작업이 동작하게 하기 위하여 스케줄러는 ==락==을 건다.
- 락이 많아질수록 (= CPU가 많아질수록) CPU의 성능은 저하된다.
##### 캐시 친화성
- 캐시 친화성을 해결하기 위해 프로세서가 CPU 사이를 마구 옮겨다니도록 설계하는 것은 구현이 복잡하다.

### 멀티 큐 스케줄링(MQMS)

여러 개의 스케줄링 큐로 구성된 프레임워크이다. 
작업이 시스템에 들어가면 하나의 스케줄링 큐에 배치되고 독립적으로 스케줄된다.

-> 이로써 정보의 공유 및 동기화 문제를 피할 수 있다.


##### SQMS에 비해 가지는 이점
![[좋았쓰.png]]
- 확장성: 큐의 개수가 증가하므로 락, 캐시 친화성 등은 문제가 되지 않는다.
##### 새로운 문제
![[에.png]]
- [[워크로드 불균형(Load Imbalance)]]
- 